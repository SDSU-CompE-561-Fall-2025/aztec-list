# ============================================================================
# BACKEND ENVIRONMENT VARIABLES (.env)
# ============================================================================
# This file configures the FastAPI backend server.
# Copy this file to .env in the backend/ directory and update values as needed.
#
# For FRONTEND configuration, see ../frontend/.env.example
# ============================================================================

# Application settings
APP__TITLE="Aztec List"
APP__DESCRIPTION="API for an OfferUp-style marketplace for college students"
APP__VERSION="0.1.0"
APP__DOCS_URL="/docs"
APP__REDOC_URL="/redoc"

# Security settings (REQUIRED - generate a secure secret key!)
# Generate with: uv run python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT__SECRET_KEY="CHANGE_ME_generate_a_secure_random_key_here"
JWT__ALGORITHM="HS256"
# Token expiration in minutes (30 min default, increase for better UX)
# Note: Frontend stores tokens in localStorage and will require re-login after expiration
JWT__ACCESS_TOKEN_EXPIRE_MINUTES=30

# Database settings
# For local development with SQLite (default):
# The database file will be created in the backend/ directory when you run the app
DB__DATABASE_URL="sqlite:///./aztec_list.db"

# For PostgreSQL (production):
# DB__DATABASE_URL="postgresql://user:password@localhost:5432/aztec_list"

# Database configuration
DB__ECHO=false

# Moderation settings
# Number of strikes before automatic permanent ban
MODERATION__STRIKE_AUTO_BAN_THRESHOLD=3

# Listing settings
# Maximum number of images allowed per listing
LISTING__MAX_IMAGES_PER_LISTING=10

# Storage settings (File uploads)
# Directory for storing uploaded images (relative to backend root)
STORAGE__UPLOAD_DIR="uploads/images"
# Maximum file size in megabytes for image uploads
STORAGE__MAX_FILE_SIZE_MB=5
# Allowed file extensions for image uploads (JSON array)
STORAGE__ALLOWED_EXTENSIONS='[".jpg", ".jpeg", ".png", ".webp", ".gif"]'
# Allowed MIME types for image uploads (JSON array)
STORAGE__ALLOWED_MIME_TYPES='["image/jpeg", "image/png", "image/webp", "image/gif"]'

# CORS settings
# WARNING: The default localhost origins are for DEVELOPMENT ONLY!
# In PRODUCTION, you MUST override these with your actual frontend domain(s).
# Examples:
#   - Production: '["https://azteclist.example.com"]'
#   - Staging: '["https://staging.azteclist.example.com"]'
#   - Multiple: '["https://app.example.com", "https://admin.example.com"]'
#
# WARNING: NEVER use "*" (wildcard) with CORS__ALLOW_CREDENTIALS=true - this is a security risk!
#
# Comma-separated list of allowed origins (frontend URLs)
# Default is localhost:3000 for Next.js frontend development
CORS__ALLOWED_ORIGINS='["http://localhost:3000"]'
# Allow credentials (cookies, authorization headers) - required for authentication
CORS__ALLOW_CREDENTIALS=true
CORS__ALLOWED_METHODS='["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"]'
CORS__ALLOWED_HEADERS='["*"]'

# Logging settings
# Logging level: DEBUG, INFO, WARNING, ERROR, or CRITICAL (enum values only)
LOGGING__LEVEL="INFO"
# Use JSON format for logs (recommended for production, false for development)
LOGGING__USE_JSON=false
# Format string for non-JSON logs
LOGGING__FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"
# Uvicorn access log level: DEBUG, INFO, WARNING, ERROR, or CRITICAL
LOGGING__UVICORN_ACCESS_LEVEL="WARNING"
# Uvicorn error log level: DEBUG, INFO, WARNING, ERROR, or CRITICAL
LOGGING__UVICORN_ERROR_LEVEL="INFO"
# Paths to exclude from detailed request logging
LOGGING__EXCLUDED_PATHS='["/health", "/docs", "/redoc", "/openapi.json"]'

# Email settings (for Resend)
# Sign up at https://resend.com to get your API key
EMAIL__RESEND_API_KEY=""
# Email address to use as the "from" address
# IMPORTANT: Without a verified domain, Resend only sends to EMAIL__SUPPORT_EMAIL
# - Testing: Use onboarding@resend.dev as FROM, your email as SUPPORT
# - Production: Verify domain at https://resend.com/domains, use noreply@yourdomain.com
# Do NOT use @gmail.com, @yahoo.com, or other public email domains as FROM address
EMAIL__FROM_EMAIL="onboarding@resend.dev"
# Email address where support tickets are sent (must match your Resend verified email for testing)
EMAIL__SUPPORT_EMAIL="your-verified-email@example.com"
# Enable/disable email sending (set to false if you don't want to use email notifications)
EMAIL__ENABLED=true
